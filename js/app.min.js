!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=n(1),r=i(s),o=n(2),l=i(o);console.table({location:location,isMain:"/"===location.pathname,isCatalog:"/catalog.html"===location.pathname}),!location.pathname.endsWith("index.html")&&location.pathname.match(/.+\.html$/g)||function(){function e(){var e={zoom:16,center:new google.maps.LatLng(59.9395,30.331),panControl:!1,zoomControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,mapTypeControl:!1,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1},t=document.getElementById("map")&&new google.maps.Map(document.getElementById("map"),e),n=new google.maps.LatLng(59.93857,30.3245);new google.maps.Marker({position:n,icon:"img/pin.png",map:t}).setMap(t)}google&&google.maps.event.addDomListener(window,"load",e);var t=[].concat(a(document.querySelectorAll('a[href*="#"]')));t.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=document.querySelector(e.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset,i=setInterval(function(){var e=n/20;e>window.pageYOffset-n&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,n),clearInterval(i))},10)})});var n=document.querySelector(".popup"),i=document.querySelector(".btn-popup-show"),s=n&&n.querySelector(".btn-popup-close");i.addEventListener("click",function(e){e.preventDefault(),n.classList.add("popup--open")}),s.addEventListener("click",function(e){e.preventDefault(),n.classList.remove("popup--open")}),document.addEventListener("keydown",function(e){27===e.keyCode&&n.classList.remove("popup--open")}),document.addEventListener("click",function(e){e.target.className.includes("popup")||n.classList.remove("popup--open")}),new r.default(".slider",{backgrounds:["img/slide-1.png","img/slide-2.png","img/slide-3.png"],titles:["Крем-брюле и пломбир с малиновым джемом","Шоколадный пломбир и лимонный сорбет","Пломбир с помадкой и клубничный щербет"]})}(),location.pathname.endsWith("/catalog.html")&&function(){new l.default(".filter__block--range",{min:100,max:1e3,from:200,to:500,step:100,output:{class:"block-title",template:"Цена: %value1% руб. - %value2% руб."}})}()},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){if(a(this,e),this.defaultOptions={arrows:!1,dots:!0,backgrounds:[],titles:[],items:1},!t)throw Error("Element is not defined!");this.el=t,this.options=Object.assign({},this.defaultOptions,n),this.container=document.querySelector(this.el),this.activeIndex=0,this._init()}return s(e,[{key:"_init",value:function(){this._create(),this.options.dots&&this._createDots(),this._createBackgrounds(this.activeIndex),this._createTitleSlide(this.activeIndex)}},{key:"_create",value:function(){var e=this,t=this.container.getBoundingClientRect().width;this.container.classList.add("ui-slider"),this.slides=[].concat(i(this.container.querySelectorAll(".slide")));var n=document.createElement("DIV");n.classList.add("ui-slider__wrapper"),this.slides.forEach(function(n){n.style.width=t/e.options.items+"px"});var a=document.createElement("DIV");a.classList.add("ui-slider__inner"),a.style.width=this.slides.length*this.slides[0].getBoundingClientRect().width+"px",n.appendChild(a),this.slides.forEach(function(e){a.appendChild(e)}),[].concat(i(this.container.querySelectorAll(":not(.ui-slider__wrapper)"))).forEach(function(e){e.parentNode.removeChild(e)}),this.container.appendChild(n)}},{key:"_createDots",value:function(){var e=this,t=document.createElement("DIV");t.classList.add("ui-slider__dots"),this.container.appendChild(t);var n=document.createDocumentFragment();this.slides.forEach(function(t,i){var a=document.createElement("SPAN");a.classList.add("ui-slider__dot"),a.addEventListener("click",function(e){var t=!0,n=!1,a=void 0;try{for(var s,r=e.target.parentNode.children[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){s.value.classList.remove("ui-slider__dot--active")}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}e.target.classList.add("ui-slider__dot--active"),this.activeIndex=i,this._createBackgrounds(i),this._createTitleSlide(i)}.bind(e)),n.appendChild(a)}),t.appendChild(n),this.dots=[].concat(i(t.querySelectorAll(".ui-slider__dot"))),this.dots[this.activeIndex].classList.add("ui-slider__dot--active")}},{key:"_createBackgrounds",value:function(e){var t=document.querySelector("body");t.classList.add("ui-slider__bg"),t.style.backgroundImage="url("+this.options.backgrounds[e]+")"}},{key:"_createTitleSlide",value:function(e){document.querySelector(".slide-title").innerText=""+this.options.titles[e]}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){if(i(this,e),this.defaultOptions={min:0,max:100,from:10,to:50,step:1,output:{class:"range__output",template:"%value1% - %value2%"}},!t)throw Error("Element is not defined!");this.el=t,this.options=Object.assign({},this.defaultOptions,n),this.container=document.querySelector(this.el),this.innerProps={handleWidth:0,sliderWidth:0,sliderLeft:0,innerStep:0,stepSize:0,stepCount:1,stepMult:1,isDragging:!1,handles:{active:void 0,min:{x:0},max:{x:0}},values:{min:0,max:0}},this._init()}return a(e,[{key:"_init",value:function(){this._createRange()}},{key:"createEvents",value:function(e,t,n){t.split(" ").forEach(function(t){e.addEventListener(t,n)})}},{key:"_createRange",value:function(){this.range=document.createElement("DIV"),this.range.classList.add("range"),this.main=document.createElement("DIV"),this.main.classList.add("range__main"),this.line=document.createElement("DIV"),this.line.classList.add("range__line"),this.range.appendChild(this.main),this.main.appendChild(this.line),this._createHandles(),this._createBar(),this.container.appendChild(this.range),this._setInitialValues(),this._setHandle(),this._setBar(),this._createOutput(),this._render()}},{key:"_createOutput",value:function(){this.output=document.createElement("p"),this.output.classList.add(this.options.output.class),this.output.textContent=this.options.output.template,this.container.insertBefore(this.output,this.range)}},{key:"_createBar",value:function(){this.bar=document.createElement("DIV"),this.bar.classList.add("range__bar"),this.main.appendChild(this.bar)}},{key:"_createHandles",value:function(){var e=document.querySelector("body");this.handleMin=document.createElement("span"),this.handleMin.classList.add("range__handle","range__handle--min"),this.handleMax=document.createElement("span"),this.handleMax.classList.add("range__handle","range__handle--max"),this.main.appendChild(this.handleMin),this.main.appendChild(this.handleMax),this.createEvents(e,"touchmove mousemove",this._move.bind(this)),this.createEvents(e,"touchend mouseup",this._drop.bind(this)),this.createEvents(this.handleMax,"touchstart mousedown",this._grab.bind(this)),this.createEvents(this.handleMin,"touchstart mousedown",this._grab.bind(this))}},{key:"_move",value:function(e){var t=this.innerProps,n=t.sliderLeft,i=t.handleWidth,a=t.isDragging,s=t.handles;if(a&&s.active){var r=e.touches?e.touches[0].pageX-n-i/2:e.pageX-n-i/2,o=s.active;"min"===o&&r>s.max.x?s[o].x=s.max.x:"max"===o&&r<s.min.x?s[o].x=s.min.x:s[o].x=r,console.table({handles:s}),this._setValues()}}},{key:"_setInitialValues",value:function(){var e=this.options,t=e.min,n=e.max,i=e.from,a=e.to,s=e.step;this.innerProps.handleWidth=this.handleMin.getBoundingClientRect().width,this.innerProps.sliderLeft=this.line.getBoundingClientRect().left,this.innerProps.sliderWidth=this.line.getBoundingClientRect().width,this.innerProps.stepCount=n/s,this.innerProps.stepSize=this.innerProps.sliderWidth/this.innerProps.stepCount,this.innerProps.innerStep=s/n,this.innerProps.stepMult=this.innerProps.innerStep*s;var r=this.innerProps,o=r.handles,l=r.innerStep,c=r.stepSize,d=r.stepMult,u=100*o.min.x/c;u=u>=s?u:t,o.min.x=i*l/d*c,o.max.x=a*l/d*c,this.innerProps.values={min:Math.ceil(u),max:Math.ceil(100*o.max.x/c)}}},{key:"_setValues",value:function(){var e=this.innerProps,t=e.innerStep,n=e.stepSize,i=e.sliderWidth,a=e.handles,s=e.handleWidth,r=a.active,o=a[r].x,l=Math.round(Math.round(o/t)/i)*n;l<n?l=s/2:l>i&&(l=i),a[r].x=l,this._setHandle(),this._setBar(),this._calcValues(),this._render()}},{key:"_calcValues",value:function(){var e=this.innerProps,t=e.handles,n=e.stepSize,i=e.values,a=this.options,s=a.min,r=a.step,o=100*t.min.x/n;o=o>=r?o:s;var l=Math.ceil(o),c=Math.ceil(100*t.max.x/n);this.innerProps.values={min:l>i.max?i.max:l,max:c<i.min?i.min:c}}},{key:"_render",value:function(){var e=this.innerProps.values;this.output.textContent=this.options.output.template.replace("%value1%",e.min).replace("%value2%",e.max)}},{key:"_grab",value:function(e){e.preventDefault();var t=this.innerProps.handles;return e.target.classList.contains("range__handle--max")?(this.innerProps.isDragging=!0,t.active="max",this.range.classList.add("range--dragging")):e.target.classList.contains("range__handle--min")&&(this.innerProps.isDragging=!0,t.active="min",this.range.classList.add("range--dragging")),!1}},{key:"_drop",value:function(e){e.preventDefault(),this.range.classList.remove("range--dragging"),this.innerProps.isDragging=!1,this.innerProps.handles.active=""}},{key:"_setHandle",value:function(){var e=this.innerProps.handles,t=e.min.x,n=e.max.x;this.handleMin.style.left=t+"px",this.handleMax.style.left=n+"px"}},{key:"_setBar",value:function(){var e=this.innerProps.handles,t=e.min.x,n=e.max.x,i=n-t;this.bar.style.left=t+"px",this.bar.style.width=i+"px"}}]),e}();t.default=s}]);